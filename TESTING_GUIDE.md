# üß™ **–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è Cookie Consent**

## üöÄ **–ö—Ä–æ–∫ 4: –ó–∞–ø—É—Å–∫ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –≤–∞—à–∏–º GA ID**

### 4.1 –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
cd jefeepoxi-main

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ)
npm install

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–æ–∑—Ä–æ–±–∫–∏
npm run dev
```

### 4.2 –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –≤ **—Ä–µ–∂–∏–º—ñ —ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ** (Ctrl+Shift+N –≤ Chrome)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `http://localhost:8080` (–∞–±–æ –ø–æ—Ä—Ç —è–∫–∏–π –ø–æ–∫–∞–∑—É—î Vite)
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Developer Tools** (F12)
4. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
5. **–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏:** `üç™ Google Analytics 4 initialized with Consent Mode v2`

---

## üç™ **–ö—Ä–æ–∫ 5: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Cookie Banner**

### 5.1 –ü–µ—Ä—à–∞ –ø–æ—è–≤–∞ –±–∞–Ω–µ—Ä–∞
**–©–æ –ø–æ–≤–∏–Ω–Ω–æ —Å—Ç–∞—Ç–∏—Å—è:**
- ‚úÖ –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –∑'—è–≤–ª—è—î—Ç—å—Å—è –±–∞–Ω–µ—Ä –∑–Ω–∏–∑—É
- ‚úÖ –í–∏–¥–Ω–æ backdrop –∑ blur –µ—Ñ–µ–∫—Ç–æ–º
- ‚úÖ –ë–∞–Ω–µ—Ä –º—ñ—Å—Ç–∏—Ç—å —ñ—Å–ø–∞–Ω—Å—å–∫–∏–π —Ç–µ–∫—Å—Ç
- ‚úÖ –î–≤—ñ –∫–Ω–æ–ø–∫–∏: "Solo esenciales" (—Å—ñ—Ä–∞) —Ç–∞ "Aceptar todas" (–∑–µ–ª–µ–Ω–∞)

**–Ø–∫—â–æ –±–∞–Ω–µ—Ä –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:
window.showCookieBanner()
```

### 5.2 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ "Aceptar todas"
1. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∑–µ–ª–µ–Ω—É –∫–Ω–æ–ø–∫—É "Aceptar todas"**
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ:**
   ```
   ‚úÖ Cookies accepted - Analytics and advertising enabled
   üç™ Google Consent Mode updated: {analytics: true, marketing: true, ...}
   ```
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ localStorage:**
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å F12 ‚Üí Application ‚Üí Local Storage ‚Üí localhost
   - –ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏: `cookie-consent: "accepted"`

### 5.3 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ "Solo esenciales"
1. **–°–∫–∏–Ω—å—Ç–µ —Ç–µ—Å—Ç:**
   ```javascript
   window.cookieUtils.resetCookieConsent()
   ```
2. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —Å—ñ—Ä—É –∫–Ω–æ–ø–∫—É "Solo esenciales"**
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ:**
   ```
   ‚ùå Cookies rejected - Only essential cookies enabled
   üç™ Google Consent Mode updated: {analytics: false, marketing: false, ...}
   ```

### 5.4 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∏–±–æ—Ä—É
1. **–û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É (F5)**
2. **–ë–∞–Ω–µ—Ä –ù–ï –ø–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è –∑–Ω–æ–≤—É**
3. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–æ–≤—É –≤–∫–ª–∞–¥–∫—É –∑ —Ç–∏–º –∂–µ —Å–∞–π—Ç–æ–º**
4. **–ë–∞–Ω–µ—Ä –ù–ï –ø–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è**

---

## üîç **–ö—Ä–æ–∫ 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Google Analytics**

### 6.1 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Network –∑–∞–ø–∏—Ç—ñ–≤
1. **Developer Tools ‚Üí Network –≤–∫–ª–∞–¥–∫–∞**
2. **–û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É**
3. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Aceptar todas" –Ω–∞ –±–∞–Ω–µ—Ä—ñ**
4. **–®—É–∫–∞–π—Ç–µ –∑–∞–ø–∏—Ç–∏ –¥–æ:**
   - `googletagmanager.com`
   - `google-analytics.com`
   - `analytics.google.com`

### 6.2 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ Google Analytics Real-time
1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ Google Analytics** (–≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑ G-BQC18G9GBJ)
2. **–ü–µ—Ä–µ–π–¥—ñ—Ç—å: Reports ‚Üí Realtime ‚Üí Overview**
3. **–ù–∞ –≤–∞—à–æ–º—É —Å–∞–π—Ç—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Aceptar todas"**
4. **–ù–∞–≤—ñ–≥—É–π—Ç–µ –ø–æ —Å–∞–π—Ç—É (–∫—ñ–ª—å–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–æ–∫)**
5. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Ç–∞ WhatsApp**
6. **–í GA4 –ø–æ–≤–∏–Ω–Ω—ñ –∑'—è–≤–∏—Ç–∏—Å—è:**
   - –ê–∫—Ç–∏–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (1-2 —Ö–≤–∏–ª–∏–Ω–∏)
   - –ü–æ–¥—ñ—ó: `page_view`, `phone_call`, `whatsapp_contact`

### 6.3 –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –Ω–∞–¥—Ö–æ–¥—è—Ç—å:

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Measurement ID:**
```html
<!-- –í index.html –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏: -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BQC18G9GBJ"></script>
<!-- —Ç–∞ -->
gtag('config', 'G-BQC18G9GBJ', {
```

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–æ–º–∏–ª–∫–∏:**
- –ß–µ—Ä–≤–æ–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –≤ Console –º–æ–∂—É—Ç—å –±–ª–æ–∫—É–≤–∞—Ç–∏ GA
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –Ω–µ–º–∞—î –±–ª–æ–∫—É–≤–∞—á—ñ–≤ —Ä–µ–∫–ª–∞–º–∏

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤:**
- –ú–æ–±—ñ–ª—å–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω
- –†—ñ–∑–Ω—ñ –±—Ä–∞—É–∑–µ—Ä–∏
- –†—ñ–∑–Ω—ñ –º–µ—Ä–µ–∂—ñ

---

## üåê **–ö—Ä–æ–∫ 7: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º—É–ª—å—Ç–∏–º–æ–≤–Ω–æ—Å—Ç—ñ**

### 7.1 –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º–æ–≤–∏
1. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –º–æ–≤–∏ –≤ —Ö–µ–¥–µ—Ä—ñ (ES/EN)**
2. **–°–∫–∏–Ω—å—Ç–µ –±–∞–Ω–µ—Ä:** `window.showCookieBanner()`
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ç–µ–∫—Å—Ç –∑–º—ñ–Ω–∏–≤—Å—è –Ω–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É**

### 7.2 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É
1. **Developer Tools ‚Üí Device Toolbar (Ctrl+Shift+M)**
2. **–û–±–µ—Ä—ñ—Ç—å –º–æ–±—ñ–ª—å–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π**
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –±–∞–Ω–µ—Ä –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π**

---

## üõ†Ô∏è **–ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

```javascript
// === –í –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞ ===

// –ü–æ–∫–∞–∑–∞—Ç–∏ –±–∞–Ω–µ—Ä –∑–Ω–æ–≤—É
window.showCookieBanner()

// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –∑–≥–æ–¥—É
window.cookieUtils.getCookieConsent()

// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
window.cookieUtils.getCookieSettings()

// –°–∫–∏–Ω—É—Ç–∏ –≤—Å—ñ cookies
window.cookieUtils.resetCookieConsent()

// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –¥–æ–∑–≤–æ–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è
window.cookieUtils.isCookieCategoryAllowed('analytics')

// === –¢–ï–°–¢–£–í–ê–ù–ù–Ø –ë–Ü–ó–ù–ï–°-–ü–û–î–Ü–ô JEFEEPOXI ===

// –Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ –∫–æ–Ω—Å–æ–ª—ñ:
import('./src/lib/analytics.js').then(analytics => {
  // –¢–µ—Å—Ç–æ–≤–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –æ—Ü—ñ–Ω–∫—É
  analytics.trackQuoteRequest('test_source');
  
  // –¢–µ—Å—Ç–æ–≤–∏–π –¥–∑–≤—ñ–Ω–æ–∫
  analytics.trackPhoneCall('test_location');
  
  // –¢–µ—Å—Ç–æ–≤–∏–π WhatsApp
  analytics.trackWhatsAppClick('test_location');
  
  // –¢–µ—Å—Ç–æ–≤–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É
  analytics.trackProjectView('industrial');
  
  // –¢–µ—Å—Ç–æ–≤–∞ –ø–æ–¥—ñ—è Valencia
  analytics.trackValenciaSpecific('test_action', 'centro');
});

// –ü—Ä–æ—Å—Ç—ñ—à—ñ —Ç–µ—Å—Ç–æ–≤—ñ –ø–æ–¥—ñ—ó:
window.cookieUtils.trackEvent('test_quote_request', { value: 10 });
window.cookieUtils.trackEvent('test_phone_call', { value: 8 });
```

---

## üìä **–ö—Ä–æ–∫ 8: –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤ Google Analytics**

### 8.1 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Events
1. **Google Analytics ‚Üí Reports ‚Üí Engagement ‚Üí Events**
2. **–ü–æ–≤–∏–Ω–Ω—ñ –∑'—è–≤–∏—Ç–∏—Å—è –ø–æ–¥—ñ—ó:**
   - `page_view`
   - `session_start`
   - –í–∞—à—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–¥—ñ—ó (—è–∫—â–æ —î)

### 8.2 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Audience
1. **Reports ‚Üí Demographic ‚Üí Demographics Overview**
2. **–ü–æ–≤–∏–Ω–Ω—ñ –∑'—è–≤–∏—Ç–∏—Å—è –¥–∞–Ω—ñ –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**

### 8.3 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Consent Mode
1. **Admin ‚Üí Data Settings ‚Üí Data Collection**
2. **–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ "Google signals" —É–≤—ñ–º–∫–Ω–µ–Ω–æ**
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ Consent Mode –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ**

---

## ‚ö†Ô∏è **–ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è**

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–Ω–µ—Ä –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:**
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ:
localStorage.getItem('cookie-consent') // –ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ null
window.showCookieBanner() // –ü—Ä–∏–º—É—Å–æ–≤–æ –ø–æ–∫–∞–∑–∞—Ç–∏
```

### –ü—Ä–æ–±–ª–µ–º–∞: GA –Ω–µ –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ
**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Measurement ID
2. –í—ñ–¥–∫–ª—é—á—ñ—Ç—å –±–ª–æ–∫—É–≤–∞—á—ñ —Ä–µ–∫–ª–∞–º–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –Ω–∞—Ç–∏—Å–Ω—É–ª–∏ "Aceptar todas"
4. –ó–∞—á–µ–∫–∞–π—Ç–µ 5-10 —Ö–≤–∏–ª–∏–Ω –¥–ª—è –ø–æ—è–≤–∏ –¥–∞–Ω–∏—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: Consent Mode –Ω–µ –ø—Ä–∞—Ü—é—î
**–†—ñ—à–µ–Ω–Ω—è:**
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ:
window.gtag // –ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—î—é
window.dataLayer // –ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –º–∞—Å–∏–≤–æ–º
```

---

## ‚úÖ **–ß–µ–∫–ª—ñ—Å—Ç —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

- [ ] –ë–∞–Ω–µ—Ä –∑'—è–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—ñ
- [ ] –ö–Ω–æ–ø–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –í–∏–±—ñ—Ä –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ localStorage
- [ ] –ë–∞–Ω–µ—Ä –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—ñ
- [ ] Google Analytics –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –ø—ñ—Å–ª—è –∑–≥–æ–¥–∏
- [ ] Consent Mode –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
- [ ] –ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é—î
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É
- [ ] –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—ñ
- [ ] Real-time –¥–∞–Ω—ñ –≤ GA4 –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è

**–Ø–∫—â–æ –≤—Å—ñ –ø—É–Ω–∫—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ - –≤–∞—à Cookie Consent –ø—Ä–∞—Ü—é—î —ñ–¥–µ–∞–ª—å–Ω–æ! üéâ**
